<Window x:Class="UWUVCI_AIO_WPF.Modules.Nintendont.NintendontConfigWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Nintendont Configurator"
        Height="723" Width="1094"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        Background="#FFF9F9F9">

    <!--
      ──────────────────────────────────────────────────────────────────────────
      UWUVCI Look & Feel
      - Matches HelpWindow: white card, blue border, shadow, rounded corners.
      - Styles mirror ApplicationSettings (button + textbox).
      - If you centralize styles later (e.g., App.xaml or Styles/UWUVCI.xaml),
        remove this Window.Resources block and add a merged dictionary instead.
      ──────────────────────────────────────────────────────────────────────────
    -->
    <Window.Resources>
        <!-- Buttons (copied from ApplicationSettings for standalone usage) -->
        <Style TargetType="Button">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="6,0,0,0"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Background" Value="#FF2196F3"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF42A5F5"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF1E88E5"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="#FF757575"/>
        </Style>

        <!-- TextBoxes (copied from ApplicationSettings) -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="4"/>
            <Style.Triggers>
                <Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#FF2196F3"/>
                    <Setter Property="BorderThickness" Value="1.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Small helper style: label cells in grids -->
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="#222"/>
        </Style>
    </Window.Resources>

    <Border CornerRadius="6"
            Background="White"
            Margin="12,12,10,12"
            Padding="12"
            BorderBrush="#FF2196F3"
            BorderThickness="1"
            SnapsToDevicePixels="True"
            Effect="{DynamicResource ShadowEffect}">
        <Grid Height="673" VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- header -->
                <RowDefinition Height="Auto"/>
                <!-- device/preset row -->
                <RowDefinition Height="*"/>
                <!-- main two-column content -->
                <RowDefinition Height="Auto"/>
                <!-- footer -->
            </Grid.RowDefinitions>

            <!-- ── Header (with inline banner) ───────────────────────────── -->
            <DockPanel Grid.Row="0" Margin="0,0,0,8" LastChildFill="False">
                <TextBlock Text="🎮 Nintendont Configurator"
                   FontSize="22"
                   FontWeight="Bold"
                   Foreground="#1A1A1A"
                   VerticalAlignment="Center"
                   DockPanel.Dock="Left"/>

                <!-- Inline yellow banner -->
                <Border x:Name="BannerNewFormat"
                    Background="#FFFFF4B5"
                    BorderBrush="#FFE0C24B"
                    BorderThickness="1"
                    CornerRadius="12"
                    Padding="10,2"
                    Margin="12,0,0,0"
                    VerticalAlignment="Center"
                    Visibility="Collapsed"
                    DockPanel.Dock="Left">

                    <TextBlock Text="⚠️ Newer nincfg.bin format detected"
                       Foreground="#5C4A00"
                       FontSize="12"
                       FontWeight="SemiBold"
                       VerticalAlignment="Center"/>
                </Border>
            </DockPanel>


            <!-- ── Drive + Preset Row ──────────────────────────────────────── -->
            <Grid Grid.Row="1" Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Drive + Preset selectors -->
                <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,120,0">
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="SD Card / Drive" FontWeight="SemiBold"/>
                        <ComboBox x:Name="DriveBox" Width="112" Height="32" Margin="0,4,0,0"
                                  ToolTip="Choose your SD card (root used for save/detect)."/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock Text="Preset" FontWeight="SemiBold"/>
                        <ComboBox x:Name="PresetBox" Width="200" Height="32" Margin="0,4,0,0"
                                  ToolTip="Load a preset (Normal, Widescreen, Debug, Arcade)."/>
                    </StackPanel>
                </StackPanel>

                <!-- Actions -->
                <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right" Margin="8,0">
                    <Button x:Name="BtnReloadDrives" Content="Reload Drives" Width="140" Height="32" Margin="0,0,8,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Grid.Column="2" HorizontalAlignment="Right" Margin="8,0">
                    <Button x:Name="BtnOpen" Content="Open nincfg.bin…" Width="170" Height="32" Margin="0,0,8,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Grid.Column="3" HorizontalAlignment="Right" Margin="8,0">
                    <StackPanel>
                        <Button x:Name="BtnDownload" Content="Download Nintendont" Width="190" Height="32"/>
                        <TextBlock x:Name="DownloadStatusText"
                                   Margin="6,6,0,0"
                                   Foreground="#555"
                                   FontSize="12"
                                   Text=""
                                   ToolTip="Shows brief status when downloading Nintendont."/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- ── Main Content: Two Columns ───────────────────────────────── -->
            <Grid Grid.Row="1" Margin="0,60,0,10" Grid.RowSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="481*"/>
                    <ColumnDefinition Width="635*"/>
                </Grid.ColumnDefinitions>

                <!-- ========== LEFT COLUMN ================================== -->
                <StackPanel Margin="0,0,10,10">

                    <!-- Section header helper -->
                    <!-- Gameplay -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Gameplay" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Gameplay options -->
                    <WrapPanel Margin="0,0,0,8" ItemWidth="220">
                        <CheckBox x:Name="ChkCheats" Content="Cheats" Margin="0,4"
                                      ToolTip="Enable Ocarina/Gecko cheat engine."/>
                        <CheckBox x:Name="ChkAutoBoot" Content="Auto Boot" Margin="0,4"
                                      ToolTip="Automatically boot the game without menu."/>
                        <CheckBox x:Name="ChkSkipIpl" Content="Skip IPL" Margin="0,4"
                                      ToolTip="Skip GameCube BIOS boot animation."/>
                        <CheckBox x:Name="ChkTriArcade" Content="TRI Arcade Mode" Margin="0,4"
                                      ToolTip="Enable Triforce arcade compatibility."/>
                        <CheckBox x:Name="ChkBba" Content="BBA Emulation" Margin="0,4"
                                      ToolTip="Broadband Adapter emulation (experimental)."/>
                        <CheckBox x:Name="ChkCheatPath" Content="Cheat Path (/codes)" Margin="0,4"
                                      ToolTip="Use /codes folder for .gct files."/>
                    </WrapPanel>

                    <!-- Memory Card -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Memory Card" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Grid Margin="0,0,0,8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Memcard Emulation:" Style="{StaticResource FormLabel}"/>
                        <CheckBox Grid.Row="0" Grid.Column="1" x:Name="ChkMemcardEmu" Content="Enable" Margin="0,2,0,2"
                                      ToolTip="Use virtual memory card stored on SD card."/>
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Blocks:" Style="{StaticResource FormLabel}" />
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,19,7,0" Grid.RowSpan="2">
                            <ComboBox x:Name="MemcardBlocksBox" Width="117" Height="32" Margin="0,0,10,0"
                                          ToolTip="59, 123, 251, 507 (unstable), 1019 (unstable), 2043 (unstable)"/>
                            <CheckBox x:Name="ChkMemcardMulti" Content="Memcard Multi"
                                          ToolTip="Use multiple cards for different slots/titles." Width="128"/>
                        </StackPanel>
                    </Grid>

                    <!-- Controller -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Controller" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Grid Margin="0,0,0,8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="CC Rumble:" Style="{StaticResource FormLabel}"/>
                        <CheckBox Grid.Row="0" Grid.Column="1" x:Name="ChkCcRumble" Content="Enable" Margin="0,2,0,2"
                                      ToolTip="Enable rumble for Classic Controller."/>
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Native Control:" Style="{StaticResource FormLabel}"/>
                        <CheckBox Grid.Row="1" Grid.Column="1" x:Name="ChkNativeSi" Content="Enable" Margin="0,2,0,2"
                                      ToolTip="Use console's native Serial Interface (Wii-only feature)."/>
                    </Grid>

                    <!-- Video -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Video" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Force Mode:" Style="{StaticResource FormLabel}"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" x:Name="VideoForceBox" Height="32" Margin="10,0,65,6"
                                      ToolTip="Auto, Force, Force (Deflicker), None"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Type:" Style="{StaticResource FormLabel}"/>
                        <ComboBox Grid.Row="1" Grid.Column="1" x:Name="VideoTypeBox" Height="32" Margin="10,0,65,6"
                                      ToolTip="Auto, NTSC, MPAL, PAL50, PAL60"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Width:" Style="{StaticResource FormLabel}"/>
                        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,6">
                            <Slider x:Name="VideoWidthSlider" Minimum="640" Maximum="720" Width="154" IsEnabled="False"/>
                            <TextBlock x:Name="VideoWidthLabel" Text="Auto" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            <CheckBox x:Name="ChkAutoWidth" Content="Auto" Margin="16,0,0,0"
                                          ToolTip="Let Nintendont pick best width automatically."/>
                        </StackPanel>

                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Widescreen:" Style="{StaticResource FormLabel}"/>
                        <CheckBox Grid.Row="3" Grid.Column="1" x:Name="ChkForceWide" Content="Force 16:9 (Wii U Wide)" Margin="0,2,0,2"
                                      ToolTip="Force 16:9 and set Wii U widescreen flag."/>

                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Progressive / PAL:" Style="{StaticResource FormLabel}"/>
                        <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal">
                            <CheckBox x:Name="ChkForceProg" Content="Force Progressive (480p)" Margin="0,2,16,2"
                                          ToolTip="Strongly recommended on modern displays."/>
                            <CheckBox x:Name="ChkPatchPal50" Content="Patch PAL50" Margin="0,2,0,2"
                                          ToolTip="Patch PAL50 titles to improve compatibility."/>
                        </StackPanel>
                    </Grid>

                </StackPanel>

                <!-- ========== RIGHT COLUMN ================================= -->

                <StackPanel Margin="1,0,20,-12" Grid.Column="1">

                    <!-- System -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="System" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Grid Margin="0,0,0,8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Language:" Style="{StaticResource FormLabel}"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" x:Name="LanguageBox" Height="32" Margin="40,0,81,6"
                                      ToolTip="Automatic, English, German, French, Spanish, Italian, Dutch"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Wii U Gamepad Slot:" Style="{StaticResource FormLabel}"/>
                        <ComboBox Grid.Row="1" Grid.Column="1" x:Name="GamepadSlotBox" Height="32" Margin="40,0,81,6"
                                      ToolTip="Choose slot (1–4) used by Wii U GamePad."/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Max Pads:" Style="{StaticResource FormLabel}"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" x:Name="MaxPadsBox" Height="32"
                                      ToolTip="Maximum controllers (1–4)." Margin="40,0,81,0"/>
                    </Grid>

                    <!-- Debug -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Debug" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <WrapPanel Margin="0,0,0,8" ItemWidth="240">
                        <CheckBox x:Name="ChkDebugger" Content="Debugger" Margin="0,4"
                                      ToolTip="Enable USB Gecko style debugger (Wii only)."/>
                        <CheckBox x:Name="ChkDebugWait" Content="Debugger Wait" Margin="0,4"
                                      ToolTip="Wait for debugger to attach before starting."/>
                        <CheckBox x:Name="ChkOsReport" Content="OSReport" Margin="0,4"
                                      ToolTip="Enable OSReport messages (on-screen logs)."/>
                        <CheckBox x:Name="ChkLog" Content="Log" Margin="0,4"
                                      ToolTip="Extra logging; reduces performance slightly."/>
                        <CheckBox x:Name="ChkDriveLed" Content="Drive Access LED" Margin="0,4"
                                      ToolTip="Pulse the console LED on SD/USB access (Wii only)."/>
                    </WrapPanel>

                    <!-- Performance -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Performance" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <WrapPanel Margin="0,0,0,8" ItemWidth="260" Width="586">
                        <CheckBox x:Name="ChkUnlockRead" Content="Unlock Read Speed" Margin="0,4"
                                      ToolTip="Remove read-speed limit; may cause issues on some media."/>
                    </WrapPanel>

                    <!-- Paths (FYI) -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Paths (FYI)" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Cheats Path:" Style="{StaticResource FormLabel}"/>
                        <TextBox  Grid.Row="0" Grid.Column="1" x:Name="CheatPathBox" Width="320" Height="28" IsReadOnly="True" Text="/codes"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Game Path:" Style="{StaticResource FormLabel}"/>
                        <TextBox  Grid.Row="1" Grid.Column="1" x:Name="GamePathBox" Width="320" Height="28" IsReadOnly="True" Text="/games"/>
                    </Grid>

                    <!-- Save / Load / Download -->
                    <StackPanel Orientation="Horizontal" Margin="0,16,0,8">
                        <Rectangle Width="4" Height="20" Fill="#FF2196F3" RadiusX="2" RadiusY="2"/>
                        <TextBlock Text="Save, Load, Download" FontWeight="Bold" FontSize="15" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,0" Width="551">
                        <Button x:Name="BtnDetect" Content="Auto-Detect nincfg.bin" Width="175" Height="32" Margin="0,0,8,0"/>
                        <Button x:Name="BtnSaveToSd" Content="Save to SD (nincfg.bin)" Width="180" Height="32" Margin="0,0,8,0"/>
                        <Button x:Name="BtnSaveAs" Content="Save As…" Width="100" Height="32" />
                    </StackPanel>

                    <!-- Status (inline text) -->
                    <TextBlock x:Name="StatusText" Margin="4,10,0,0" Foreground="#333" TextWrapping="Wrap"
                                   ToolTip="Short status messages appear here." Height="24"/>

                </StackPanel>
            </Grid>

            <!-- ── Footer ──────────────────────────────────────────────────── -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,0">
                <Button Width="0" Height="34" Content="Close" x:Name="BtnCloseFooter"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
