<Window x:Class="UWUVCI_AIO_WPF.UI.Windows.HelpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ZestyTS' UWUVCI ReadMe Viewer"
        Height="720" Width="1000"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        Background="{DynamicResource AppBackgroundBrush}"
        WindowStyle="None">

    <Border CornerRadius="8"
            Background="{DynamicResource AppCardBrush}"
            Margin="16"
            Padding="16"
            BorderBrush="{DynamicResource AppBorderBrush}"
            BorderThickness="1"
            SnapsToDevicePixels="True">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <DockPanel Grid.Row="0" Margin="0,0,0,12">
                <TextBlock x:Name="WindowTitleText"
               Text="ZestyTS' UWUVCI ReadMe Viewer"
               FontSize="22"
               FontWeight="Bold"
               Foreground="{DynamicResource AppAccentBrush}"
               DockPanel.Dock="Left"/>
                <Button Content="X"
                    Width="32"
                    Height="32"
                    Background="Transparent"
                    BorderBrush="{x:Null}"
                    Foreground="{DynamicResource AppMutedTextBrush}"
                    FontWeight="Bold"
                    Click="Close_Click"
                    ToolTip="Close"/>
            </DockPanel>


            <!-- Search controls -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,12">
                <TextBox x:Name="SearchBox"
                         Width="260"
                         Height="45"
                         Padding="8,4"
                         FontSize="14"
                         VerticalAlignment="Center"
                         BorderBrush="{DynamicResource AppBorderBrush}"
                         BorderThickness="1"
                         TextChanged="SearchBox_TextChanged"
                         KeyDown="SearchBox_KeyDown"
                         Foreground="{DynamicResource AppTextBrush}"
                         Background="{DynamicResource AppSurfaceBrush}"
                         ToolTip="Type to search (Ctrl+F to focus)"/>
                <CheckBox x:Name="CaseSensitiveBox"
                          Content="Case sensitive"
                          Margin="10,0,0,0"
                          VerticalAlignment="Center"
                          FontSize="13"/>
                <TextBlock x:Name="ResultCountText"
                           Margin="12,6,0,0"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource AppMutedTextBrush}"
                           FontSize="13"/>
                <Button Content="Refresh"
                        Width="100"
                        Height="32"
                        Margin="20,0,0,0"
                        Click="Refresh_Click"
                        ToolTip="Re-fetch from GitHub"
                        FontSize="13"
                        Padding="4"
                        Background="{DynamicResource AppAccentBrush}"
                        Foreground="{DynamicResource AppTextOnAccentBrush}"
                        BorderBrush="{DynamicResource AppAccentBrush}"/>
            </StackPanel>

            <!-- Viewers: we keep both and toggle at runtime -->
            <Grid Grid.Row="2" Background="{DynamicResource AppSurfaceBrush}">
                <!-- FlowDocument-based viewer (Windows) -->
                <ScrollViewer x:Name="DocScroll"
                              VerticalScrollBarVisibility="Auto"
                              Focusable="False"
                              Visibility="Collapsed">
                    <RichTextBox x:Name="ReadMeViewer"
                                 FontFamily="Consolas"
                                 FontSize="14"
                                 Foreground="{DynamicResource AppTextBrush}"
                                 IsReadOnly="True"
                                 Background="{DynamicResource AppSurfaceAltBrush}"
                                 Padding="16"
                                 BorderThickness="0"
                                 VerticalScrollBarVisibility="Hidden"/>
                </ScrollViewer>

                <!-- Plain text viewer (Wine/macOS safe) -->
                <ScrollViewer x:Name="PlainScroll"
                              VerticalScrollBarVisibility="Auto"
                              Focusable="False"
                              Visibility="Collapsed">
                    <TextBox x:Name="PlainViewer"
                             FontFamily="Consolas"
                             FontSize="14"
                             Foreground="{DynamicResource AppTextBrush}"
                             Background="{DynamicResource AppSurfaceAltBrush}"
                             Padding="16"
                             BorderThickness="0"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Hidden"/>
                </ScrollViewer>
            </Grid>

            <!-- Footer -->
            <StackPanel Grid.Row="3"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,12,0,0">
                <Button Width="100"
                        Height="34"
                        Content="Copy All"
                        FontSize="13"
                        Click="Copy_Click"
                        Background="{DynamicResource AppSurfaceAltBrush}"
                        Foreground="{DynamicResource AppTextBrush}"
                        BorderBrush="{DynamicResource AppBorderBrush}"/>
                <Button Width="100"
                        Height="34"
                        Content="Close"
                        Margin="8,0,0,0"
                        FontSize="13"
                        Click="Close_Click"
                        Background="{DynamicResource AppAccentBrush}"
                        Foreground="{DynamicResource AppTextOnAccentBrush}"
                        BorderBrush="{DynamicResource AppAccentBrush}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
